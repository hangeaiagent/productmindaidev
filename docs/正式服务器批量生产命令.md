# æ­£å¼æœåŠ¡å™¨æ‰¹é‡ç”Ÿäº§å‘½ä»¤æ‰§è¡ŒæŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›ProductMind AIé¡¹ç›®åœ¨æ­£å¼æœåŠ¡å™¨ä¸Šæ‰¹é‡ç”Ÿäº§äº§å“ä¸»é¡µå’Œæ¨¡æ¿è¯¦æƒ…é¡µé¢çš„å®Œæ•´æ‰§è¡ŒæŒ‡å—ã€‚

**æœåŠ¡å™¨ä¿¡æ¯**ï¼š
- **IPåœ°å€**ï¼š3.93.149.236
- **åŸŸå**ï¼šproductmindai.com
- **SSHå¯†é’¥**ï¼š/Users/a1/work/productmindai.pem
- **å·¥ä½œç›®å½•**ï¼š/home/productmindaidev

---

## ğŸš€ å¿«é€Ÿæ‰§è¡Œå‘½ä»¤

### 1. è¿æ¥æœåŠ¡å™¨
```bash
ssh -i /Users/a1/work/productmindai.pem ec2-user@3.93.149.236
```

### 2. äº§å“ä¸»é¡µå’Œæ¨¡æ¿è¯¦æƒ…é¡µé¢æ‰¹é‡ç”Ÿæˆ
```bash
# è¿›å…¥å·¥ä½œç›®å½•
cd /home/productmindaidev

# è®¾ç½®ç¯å¢ƒå˜é‡
export VITE_SUPABASE_URL="https://uobwbhvwrciaxloqdizc.supabase.co"
export VITE_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvYndiaHZ3cmNpYXhsb3FkaXpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwNzEyNjYsImV4cCI6MjA2MjY0NzI2Nn0.x9Tti06ZF90B2YPg-AeVvT_tf4qOcOYcHWle6L3OVtc"

# æ‰¹é‡ç”Ÿæˆï¼ˆåå°æ‰§è¡Œï¼‰
nohup node generate-seo-pages.cjs > logs/project-homepage-$(date +%Y%m%d_%H%M%S).log 2>&1 &

# è·å–è¿›ç¨‹ID
echo $! > logs/seo-generation.pid
```

### 3. å•ä¸ªé¡¹ç›®ç”Ÿæˆï¼ˆæµ‹è¯•ç”¨ï¼‰
```bash
# ç”ŸæˆæŒ‡å®šé¡¹ç›®
node generate-seo-pages.cjs b6bf6237-a8d2-4910-836f-6477604f0a2d
```

---

## ğŸ“Š æœåŠ¡å™¨çŠ¶æ€ç®¡ç†

### PM2è¿›ç¨‹ç®¡ç†
```bash
# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çŠ¶æ€
pm2 status

# é‡å¯é™æ€æ–‡ä»¶æœåŠ¡å™¨
pm2 restart static-server-3031

# é‡å¯FunctionsæœåŠ¡å™¨
pm2 restart functions-server-aws

# æŸ¥çœ‹æ—¥å¿—
pm2 logs static-server-3031
pm2 logs functions-server-aws
```

### æ ¸å¿ƒæœåŠ¡åˆ—è¡¨
| æœåŠ¡å | ç«¯å£ | çŠ¶æ€ | åŠŸèƒ½ |
|--------|------|------|------|
| static-server-3031 | 3031 | è¿è¡Œä¸­ | é™æ€æ–‡ä»¶æœåŠ¡å™¨ |
| functions-server-aws | 8888 | è¿è¡Œä¸­ | APIæœåŠ¡å™¨ |
| seo-pages-generator | - | è¿è¡Œä¸­ | SEOé¡µé¢ç”Ÿæˆå™¨ |

---

## ğŸŒ åŸŸåè®¿é—®é…ç½®

### Nginxä»£ç†é…ç½®
å·²é…ç½®Nginxå°†`/static-pages/`è·¯å¾„ä»£ç†åˆ°3031ç«¯å£çš„é™æ€æœåŠ¡å™¨ï¼š

```nginx
# é™æ€SEOé¡µé¢ä»£ç† - æœ€é«˜ä¼˜å…ˆçº§
location ^~ /static-pages/ {
    proxy_pass http://127.0.0.1:3031;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    # ä»£ç†è¶…æ—¶è®¾ç½®
    proxy_connect_timeout 30s;
    proxy_send_timeout 30s;
    proxy_read_timeout 30s;
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    expires 1h;
    add_header Cache-Control "public, immutable";
}
```

### è®¿é—®URLæ ¼å¼
- **äº§å“ä¸»é¡µ**ï¼š`http://productmindai.com/static-pages/pdhtml/{é¡¹ç›®ID}/index.html`
- **æ¨¡æ¿è¯¦æƒ…é¡µ**ï¼š`http://productmindai.com/static-pages/pdhtml/{é¡¹ç›®ID}/{æ¨¡æ¿ç‰ˆæœ¬ID}.html`
- **è‹±æ–‡æ¨¡æ¿è¯¦æƒ…é¡µ**ï¼š`http://productmindai.com/static-pages/pdhtml/{é¡¹ç›®ID}/{æ¨¡æ¿ç‰ˆæœ¬ID}en.html`

---

## ğŸ”§ é‡è¦ä¿®å¤è®°å½•

### ç›¸å¯¹è·¯å¾„é“¾æ¥ä¿®å¤ âœ…
**é—®é¢˜**ï¼šäº§å“ä¸»é¡µä¸­"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®ä½¿ç”¨ç¡¬ç¼–ç çš„`http://localhost:3030`é“¾æ¥

**ä¿®å¤**ï¼šä¿®æ”¹`generate-seo-pages.cjs`ä¸­çš„`viewTemplateDetails`å‡½æ•°ï¼š
```javascript
// ä¿®å¤å‰
const url = 'http://localhost:3030/static-pages/pdhtml/' + projectId + '/' + templateVersionId + '.html';

// ä¿®å¤å
const url = '/static-pages/pdhtml/' + projectId + '/' + templateVersionId + '.html';
```

**å½±å“**ï¼šæ‰€æœ‰äº§å“ä¸»é¡µä¸­çš„"æŸ¥çœ‹è¯¦æƒ…"é“¾æ¥ç°åœ¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå¯ä»¥æ­£ç¡®é€šè¿‡åŸŸåè®¿é—®

---

## ğŸ“‹ ç›‘æ§å’Œæ—¥å¿—

### å®æ—¶ç›‘æ§å‘½ä»¤
```bash
# æŸ¥çœ‹ç”Ÿæˆè¿›ç¨‹çŠ¶æ€
ps aux | grep generate-seo-pages

# å®æ—¶æŸ¥çœ‹ç”Ÿæˆæ—¥å¿—
tail -f logs/project-homepage-*.log

# æŸ¥çœ‹æˆåŠŸç»Ÿè®¡
grep -c "âœ… ç”Ÿæˆé¡µé¢" logs/project-homepage-*.log

# æŸ¥çœ‹é”™è¯¯ç»Ÿè®¡
grep -c "âŒ å¤„ç†é¡¹ç›®" logs/project-homepage-*.log

# ç»Ÿè®¡ç”Ÿæˆçš„æ–‡ä»¶æ•°é‡
find static-pages/pdhtml/ -name "index.html" | wc -l
find static-pages/pdhtml/ -name "*.html" | wc -l
```

### æ€§èƒ½ç›‘æ§
```bash
# ç›‘æ§ç£ç›˜ä½¿ç”¨
df -h static-pages/

# ç›‘æ§å†…å­˜ä½¿ç”¨
free -h

# ç›‘æ§CPUä½¿ç”¨
top -p $(cat logs/seo-generation.pid)
```

---

## ğŸ¯ ç”Ÿæˆç»“æœéªŒè¯

### æˆåŠŸæ¡ˆä¾‹ï¼š123LOGOç”Ÿæˆå™¨
**é¡¹ç›®ID**ï¼š`b6bf6237-a8d2-4910-836f-6477604f0a2d`

**è®¿é—®åœ°å€**ï¼š
- **äº§å“ä¸»é¡µ**ï¼šhttp://productmindai.com/static-pages/pdhtml/b6bf6237-a8d2-4910-836f-6477604f0a2d/index.html
- **æ¨¡æ¿è¯¦æƒ…ç¤ºä¾‹**ï¼šhttp://productmindai.com/static-pages/pdhtml/b6bf6237-a8d2-4910-836f-6477604f0a2d/425e6f98-8aa7-40b5-ae9a-36b9b5058a6f.html

**ç”Ÿæˆç»“æœ**ï¼š
- âœ… äº§å“ä¸»é¡µï¼š34KB
- âœ… æ¨¡æ¿æ•°é‡ï¼š7ä¸ª
- âœ… åˆ†ç±»æ•°é‡ï¼š1ä¸ªï¼ˆé›†æˆAIç¼–ç¨‹ï¼‰
- âœ… ç›¸å¯¹è·¯å¾„é“¾æ¥ï¼šæ­£å¸¸å·¥ä½œ
- âœ… åŸŸåè®¿é—®ï¼šæ­£å¸¸

### éªŒè¯æ¸…å•
- [x] **äº§å“ä¸»é¡µç”Ÿæˆ**ï¼šindex.htmlæ–‡ä»¶æ­£å¸¸ç”Ÿæˆ
- [x] **æ¨¡æ¿è¯¦æƒ…é¡µç”Ÿæˆ**ï¼šæ‰€æœ‰æ¨¡æ¿ç‰ˆæœ¬çš„HTMLæ–‡ä»¶ç”Ÿæˆ
- [x] **åŸŸåè®¿é—®**ï¼šé€šè¿‡productmindai.comæ­£å¸¸è®¿é—®
- [x] **ç›¸å¯¹è·¯å¾„é“¾æ¥**ï¼šæŸ¥çœ‹è¯¦æƒ…æŒ‰é’®ä½¿ç”¨ç›¸å¯¹è·¯å¾„
- [x] **Nginxä»£ç†**ï¼šé™æ€æ–‡ä»¶ä»£ç†é…ç½®æ­£å¸¸
- [x] **ç¼“å­˜è®¾ç½®**ï¼š1å°æ—¶ç¼“å­˜æ—¶é—´è®¾ç½®
- [x] **SEOä¼˜åŒ–**ï¼šå®Œæ•´çš„Metaæ ‡ç­¾å’Œç»“æ„åŒ–æ•°æ®

---

## ğŸ“ˆ ç”Ÿäº§ç¯å¢ƒç»Ÿè®¡

### å½“å‰ç”ŸæˆçŠ¶æ€
```bash
# æ£€æŸ¥ç”ŸæˆçŠ¶æ€
ssh -i /Users/a1/work/productmindai.pem ec2-user@3.93.149.236 "
cd /home/productmindaidev && 
echo 'ğŸ“Š ç”Ÿæˆç»Ÿè®¡:' && 
echo 'äº§å“ä¸»é¡µæ•°é‡:' \$(find static-pages/pdhtml/ -name 'index.html' | wc -l) && 
echo 'æ¨¡æ¿è¯¦æƒ…é¡µæ•°é‡:' \$(find static-pages/pdhtml/ -name '*.html' ! -name 'index.html' | wc -l) && 
echo 'é¡¹ç›®ç›®å½•æ€»æ•°:' \$(find static-pages/pdhtml/ -type d -mindepth 1 -maxdepth 1 | wc -l) && 
echo 'æ€»æ–‡ä»¶å¤§å°:' \$(du -sh static-pages/pdhtml/ | cut -f1)
"
```

### é¢„æœŸç»“æœ
- **äº§å“ä¸»é¡µ**ï¼š300+ ä¸ªé¡¹ç›®ä¸»é¡µ
- **æ¨¡æ¿è¯¦æƒ…é¡µ**ï¼š2000+ ä¸ªæ¨¡æ¿è¯¦æƒ…é¡µé¢
- **æ€»æ–‡ä»¶å¤§å°**ï¼šçº¦100MB
- **ç”Ÿæˆæ—¶é—´**ï¼šçº¦30-60åˆ†é’Ÿï¼ˆå–å†³äºé¡¹ç›®æ•°é‡ï¼‰

---

## ğŸš¨ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜è§£å†³

#### 1. ç¯å¢ƒå˜é‡é—®é¢˜
**ç—‡çŠ¶**ï¼š`âŒ é”™è¯¯: ç¼ºå°‘å¿…éœ€çš„ç¯å¢ƒå˜é‡`
**è§£å†³**ï¼š
```bash
export VITE_SUPABASE_URL="https://uobwbhvwrciaxloqdizc.supabase.co"
export VITE_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

#### 2. é™æ€æœåŠ¡å™¨æ— å“åº”
**ç—‡çŠ¶**ï¼š404é”™è¯¯æˆ–è¿æ¥è¶…æ—¶
**è§£å†³**ï¼š
```bash
pm2 restart static-server-3031
pm2 logs static-server-3031
```

#### 3. Nginxä»£ç†é—®é¢˜
**ç—‡çŠ¶**ï¼šé€šè¿‡åŸŸåæ— æ³•è®¿é—®é™æ€é¡µé¢
**è§£å†³**ï¼š
```bash
sudo nginx -t
sudo systemctl reload nginx
sudo tail -f /var/log/nginx/productmind_error.log
```

#### 4. ç£ç›˜ç©ºé—´ä¸è¶³
**ç—‡çŠ¶**ï¼šç”Ÿæˆè¿‡ç¨‹ä¸­æ–­
**è§£å†³**ï¼š
```bash
df -h
sudo rm -rf static-pages/old-backups/
```

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²æµç¨‹

### 1. æœ¬åœ°ä¿®æ”¹ä»£ç 
```bash
# ä¿®æ”¹generate-seo-pages.cjs
vim generate-seo-pages.cjs
```

### 2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
```bash
scp -i /Users/a1/work/productmindai.pem generate-seo-pages.cjs ec2-user@3.93.149.236:/home/productmindaidev/
```

### 3. é‡æ–°ç”Ÿæˆ
```bash
ssh -i /Users/a1/work/productmindai.pem ec2-user@3.93.149.236 "
cd /home/productmindaidev && 
export VITE_SUPABASE_URL='https://uobwbhvwrciaxloqdizc.supabase.co' &&
export VITE_SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...' &&
node generate-seo-pages.cjs
"
```

### 4. éªŒè¯ç»“æœ
```bash
curl -I http://productmindai.com/static-pages/pdhtml/b6bf6237-a8d2-4910-836f-6477604f0a2d/index.html
```

---

**ğŸ“Œ é‡è¦æé†’**ï¼š
- æ‰€æœ‰æ“ä½œéƒ½åœ¨æ­£å¼æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œè¯·è°¨æ…æ“ä½œ
- å»ºè®®åœ¨ä½å³°æ—¶æ®µè¿›è¡Œæ‰¹é‡ç”Ÿæˆ
- å®šæœŸå¤‡ä»½é‡è¦æ•°æ®å’Œé…ç½®æ–‡ä»¶
- ç›‘æ§æœåŠ¡å™¨æ€§èƒ½å’Œç£ç›˜ç©ºé—´

*æœ€åæ›´æ–°ï¼š2024å¹´12æœˆ22æ—¥*  
*ç‰ˆæœ¬ï¼šv1.0.0 - ç›¸å¯¹è·¯å¾„é“¾æ¥ä¿®å¤ç‰ˆ* 