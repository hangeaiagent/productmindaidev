# ProductMind AI ç¯å¢ƒå˜é‡æ–‡ä»¶è¯´æ˜

## æ¦‚è¿°

æœ¬æ–‡æ¡£è§„èŒƒäº† ProductMind AI é¡¹ç›®ä¸­ç¯å¢ƒå˜é‡æ–‡ä»¶çš„ä½¿ç”¨é€»è¾‘å’Œæ ‡å‡†è·¯å¾„ï¼Œé¿å…å› ç¯å¢ƒå˜é‡æ–‡ä»¶è·¯å¾„é”™è¯¯å¯¼è‡´çš„æœåŠ¡å¯åŠ¨å¤±è´¥ã€‚

## æ ‡å‡†ç¯å¢ƒå˜é‡æ–‡ä»¶

### ğŸ¯ æ ‡å‡†è·¯å¾„ï¼ˆæ¨èä½¿ç”¨ï¼‰

```
/home/productmindaidev/aws-backend/.env
```

**ç›¸å¯¹è·¯å¾„**: `aws-backend/.env`

### ğŸ“‹ æ ‡å‡†å†…å®¹

```bash
# æ•°æ®åº“é…ç½®
SUPABASE_URL=https://uobwbhvwrciaxloqdizc.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvYndiaHZ3cmNpYXhsb3FkaXpjIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzA3MTI2NiwiZXhwIjoyMDYyNjQ3MjY2fQ.ryRmf_i-EYRweVLL4fj4acwifoknqgTbIomL-S22Zmo

# AIæœåŠ¡é…ç½®
DEEPSEEK_API_KEY=sk-567abb67b99d4a65acaa2d9ed06c3782
```

## ç¯å¢ƒå˜é‡æ–‡ä»¶æ¸…å•

### 1. æ ‡å‡†ç”Ÿäº§ç¯å¢ƒæ–‡ä»¶ âœ…

| æ–‡ä»¶è·¯å¾„ | ç”¨é€” | çŠ¶æ€ | å¤§å° |
|---------|------|------|------|
| `aws-backend/.env` | **ç”Ÿäº§ç¯å¢ƒæ ‡å‡†é…ç½®** | âœ… ä½¿ç”¨ä¸­ | 348 bytes |

### 2. å¤‡ä»½å’Œå†å²æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ç”¨é€” | çŠ¶æ€ | å¤§å° |
|---------|------|------|------|
| `.env` | æ ¹ç›®å½•ç¯å¢ƒå˜é‡ | âš ï¸ å·²æ¢å¤ | 2309 bytes |
| `.env.backup` | å®Œæ•´å¤‡ä»½æ–‡ä»¶ | ğŸ“¦ å¤‡ä»½ | 2309 bytes |
| `.env.old` | æ—§ç‰ˆæœ¬æ–‡ä»¶ | ğŸ“¦ å¤‡ä»½ | 367 bytes |
| `.envçš„å‰¯æœ¬` | å‰¯æœ¬æ–‡ä»¶ | ğŸ“¦ å¤‡ä»½ | 1008 bytes |
| `.env.example` | ç¤ºä¾‹æ–‡ä»¶ | ğŸ“š æ¨¡æ¿ | 138 bytes |

## ä»£ç ä¸­çš„ä½¿ç”¨è§„èŒƒ

### âœ… æ­£ç¡®ä½¿ç”¨æ–¹å¼

```javascript
// 1. åœ¨ aws-backend ç›®å½•ä¸‹çš„æ–‡ä»¶
require('dotenv').config();

// 2. åœ¨æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶
require('dotenv').config({ path: 'aws-backend/.env' });

// 3. åœ¨å­ç›®å½•ä¸­çš„æ–‡ä»¶
require('dotenv').config({ path: '../aws-backend/.env' });
```

### âŒ é”™è¯¯ä½¿ç”¨æ–¹å¼

```javascript
// é”™è¯¯ï¼šä½¿ç”¨æ ¹ç›®å½•.envï¼ˆå¯èƒ½ä¸ºç©ºæˆ–ä¸å®Œæ•´ï¼‰
require('dotenv').config();  // åœ¨æ ¹ç›®å½•ä¸‹

// é”™è¯¯ï¼šç¡¬ç¼–ç ç»å¯¹è·¯å¾„
require('dotenv').config({ path: '/home/productmindaidev/.env' });

// é”™è¯¯ï¼šä½¿ç”¨ä¸å­˜åœ¨çš„è·¯å¾„
require('dotenv').config({ path: '.env.local' });
```

## å·²çŸ¥ä½¿ç”¨æƒ…å†µ

### 1. AWSåç«¯æœåŠ¡

```typescript
// aws-backend/src/server.ts
const envPath = path.join(__dirname, '../.env');
const envResult = dotenv.config({ path: envPath });

// aws-backend/src/services/supabaseService.ts  
dotenv.config({ path: envPath });
```

### 2. FunctionsæœåŠ¡å™¨

```javascript
// functions-server.cjs (å·²ä¿®æ­£)
require('dotenv').config({ path: 'aws-backend/.env' });
```

### 3. æ‰¹é‡ç”Ÿäº§è„šæœ¬

```javascript
// production-batch-executor.mjs
dotenv.config();  // éœ€è¦ä¿®æ­£ä¸ºæŒ‡å®šè·¯å¾„

// large-scale-batch-production-optimized-v2.mjs  
dotenv.config();  // éœ€è¦ä¿®æ­£ä¸ºæŒ‡å®šè·¯å¾„
```

## ç¯å¢ƒå˜é‡è¯´æ˜

### æ•°æ®åº“ç›¸å…³

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `SUPABASE_URL` | Supabaseæ•°æ®åº“URL | `https://uobwbhvwrciaxloqdizc.supabase.co` |
| `SUPABASE_SERVICE_KEY` | SupabaseæœåŠ¡å¯†é’¥ | `eyJhbGciOiJIUzI1NiIs...` |

### AIæœåŠ¡ç›¸å…³

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `DEEPSEEK_API_KEY` | DeepSeek AI APIå¯†é’¥ | `sk-567abb67b99d4a65acaa2d9ed06c3782` |

## éƒ¨ç½²å’Œç»´æŠ¤æŒ‡å—

### 1. æ–°æœåŠ¡å¼€å‘è§„èŒƒ

å½“åˆ›å»ºæ–°çš„æœåŠ¡æˆ–è„šæœ¬æ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ ‡å‡†ç¯å¢ƒå˜é‡è·¯å¾„ï¼š

```javascript
// æ¨èæ–¹å¼ï¼šæ˜ç¡®æŒ‡å®šè·¯å¾„
require('dotenv').config({ path: 'aws-backend/.env' });
```

### 2. ç¯å¢ƒå˜é‡éªŒè¯

åœ¨æœåŠ¡å¯åŠ¨æ—¶éªŒè¯å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```javascript
const requiredEnvVars = [
  'SUPABASE_URL',
  'SUPABASE_SERVICE_KEY', 
  'DEEPSEEK_API_KEY'
];

for (const envVar of requiredEnvVars) {
  if (!process.env[envVar]) {
    console.error(`âŒ ç¼ºå°‘ç¯å¢ƒå˜é‡: ${envVar}`);
    console.error(`è¯·æ£€æŸ¥ç¯å¢ƒå˜é‡æ–‡ä»¶: aws-backend/.env`);
    process.exit(1);
  }
}
```

### 3. æ•…éšœæ’æŸ¥æ­¥éª¤

å½“é‡åˆ°ç¯å¢ƒå˜é‡ç›¸å…³é”™è¯¯æ—¶ï¼š

1. **æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨**:
   ```bash
   ls -la aws-backend/.env
   ```

2. **éªŒè¯æ–‡ä»¶å†…å®¹**:
   ```bash
   cat aws-backend/.env
   ```

3. **æ£€æŸ¥æ–‡ä»¶æƒé™**:
   ```bash
   chmod 600 aws-backend/.env
   ```

4. **éªŒè¯ç¯å¢ƒå˜é‡åŠ è½½**:
   ```javascript
   console.log('SUPABASE_URL:', process.env.SUPABASE_URL ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®');
   ```

## å®‰å…¨æ³¨æ„äº‹é¡¹

### 1. æ–‡ä»¶æƒé™

```bash
# è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
chmod 600 aws-backend/.env
```

### 2. Gitå¿½ç•¥

ç¡®ä¿ `.gitignore` åŒ…å«ï¼š

```gitignore
# ç¯å¢ƒå˜é‡æ–‡ä»¶
.env
.env.*
aws-backend/.env
!.env.example
```

### 3. å¯†é’¥è½®æ¢

å®šæœŸæ›´æ¢æ•æ„Ÿå¯†é’¥ï¼š
- SupabaseæœåŠ¡å¯†é’¥
- AI APIå¯†é’¥
- å…¶ä»–ç¬¬ä¸‰æ–¹æœåŠ¡å¯†é’¥

## è¿ç§»æŒ‡å—

### ä»å…¶ä»–ç¯å¢ƒå˜é‡æ–‡ä»¶è¿ç§»

å¦‚æœéœ€è¦ä»å…¶ä»– `.env` æ–‡ä»¶è¿ç§»ï¼š

```bash
# 1. å¤‡ä»½å½“å‰æ–‡ä»¶
cp aws-backend/.env aws-backend/.env.backup.$(date +%Y%m%d_%H%M%S)

# 2. å¤åˆ¶æ–°é…ç½®
cp source/.env aws-backend/.env

# 3. éªŒè¯é…ç½®
node -e "require('dotenv').config({path:'aws-backend/.env'}); console.log('SUPABASE_URL:', !!process.env.SUPABASE_URL);"
```

## å¸¸è§é—®é¢˜è§£å†³

### Q1: æœåŠ¡å¯åŠ¨æ—¶æç¤º"Database not configured"

**åŸå› **: ç¯å¢ƒå˜é‡æ–‡ä»¶è·¯å¾„é”™è¯¯æˆ–æ–‡ä»¶ä¸ºç©º

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ–‡ä»¶
cat aws-backend/.env

# å¦‚æœä¸ºç©ºï¼Œä»å¤‡ä»½æ¢å¤
cp .env.backup aws-backend/.env
```

### Q2: PM2å¯åŠ¨çš„æœåŠ¡æ— æ³•è¯»å–ç¯å¢ƒå˜é‡

**åŸå› **: PM2è¿›ç¨‹æ²¡æœ‰æ­£ç¡®åŠ è½½ç¯å¢ƒå˜é‡

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹å¼1: åœ¨å¯åŠ¨å‘½ä»¤ä¸­æŒ‡å®šç¯å¢ƒå˜é‡
SUPABASE_URL=xxx SUPABASE_SERVICE_KEY=xxx pm2 start app.js

# æ–¹å¼2: åœ¨ä»£ç ä¸­æ˜ç¡®æŒ‡å®šè·¯å¾„
require('dotenv').config({ path: 'aws-backend/.env' });
```

### Q3: ä¸åŒç¯å¢ƒä¸‹è·¯å¾„é—®é¢˜

**åŸå› **: ç›¸å¯¹è·¯å¾„åœ¨ä¸åŒç›®å½•ä¸‹æ‰§è¡Œæ—¶ä¼šæ”¹å˜

**è§£å†³æ–¹æ¡ˆ**:
```javascript
const path = require('path');
const envPath = path.resolve(__dirname, '../aws-backend/.env');
require('dotenv').config({ path: envPath });
```

---

## æ€»ç»“

1. **ç»Ÿä¸€ä½¿ç”¨** `aws-backend/.env` ä½œä¸ºæ ‡å‡†ç¯å¢ƒå˜é‡æ–‡ä»¶
2. **æ˜ç¡®æŒ‡å®šè·¯å¾„** è€Œä¸æ˜¯ä¾èµ–é»˜è®¤è¡Œä¸º
3. **éªŒè¯ç¯å¢ƒå˜é‡** åœ¨æœåŠ¡å¯åŠ¨æ—¶è¿›è¡Œæ£€æŸ¥
4. **å®šæœŸå¤‡ä»½** é‡è¦çš„ç¯å¢ƒå˜é‡é…ç½®
5. **éµå¾ªå®‰å…¨è§„èŒƒ** ä¿æŠ¤æ•æ„Ÿä¿¡æ¯

**è®°ä½**: æ‰€æœ‰æ–°å¼€å‘çš„æœåŠ¡å’Œè„šæœ¬éƒ½åº”è¯¥ä½¿ç”¨ `aws-backend/.env` è·¯å¾„ï¼Œé¿å…é‡å¤çš„ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯ï¼ 